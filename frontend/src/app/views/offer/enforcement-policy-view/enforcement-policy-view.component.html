<mat-accordion multi togglePosition="before">
  <mat-expansion-panel>
    <mat-expansion-panel-header (click)="$event.stopPropagation();">
      <mat-panel-title class="font-bold">Enforcement Policies
        <span *ngIf="showValidity && isAnyPolicyInvalid" class="text-error">&nbsp;(One or more policies are not in compliance.)</span>
      </mat-panel-title>
    </mat-expansion-panel-header>
    <div (click)="$event.stopPropagation();">
      <div *ngFor="let ep of enforcementPolicies" [ngClass]="{'text-error': showValidity && !ep.valid}">
        <div *ngIf="isEverythingAllowedPolicy(ep)">
          <b>Everything is allowed.</b><br/>
        </div>
        <div *ngIf="isParticipantRestrictionPolicy(ep)">
          <b>Contracting is restricted to the following organizations:</b>
          <ul *ngFor="let org of asParticipantRestrictionPolicy(ep).allowedParticipants">
            <li>
              {{ getNameIdStringById(org) }}
            </li>
          </ul>
        </div>
        <div *ngIf="isStartDatePolicy(ep)">
          <b>Contract validity is restricted to the following start date:</b><br/>
          {{ asStartDatePolicy(ep).date | date: 'full' }}<br/>
        </div>
        <div *ngIf="isEndDatePolicy(ep)">
          <b>Contract validity is restricted to the following end date:</b><br/>
          {{ asEndDatePolicy(ep).date | date: 'full'}}<br/>
        </div>
        <div *ngIf="showValidity && !ep.valid">
          <b>This policy is not in compliance.</b>
        </div>
        <br/>
      </div>
    </div>
  </mat-expansion-panel>
</mat-accordion>
